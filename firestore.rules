rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
  
  	// Manual Override

  	match /{document=**} {
  	allow read, write: if true ;
  	}

    match /data/{document} {
    	  allow read,write : if request.auth!=null && document != 'appVersion';
      	allow read: if request.auth!=null && document == 'appVersion';
    }
    
    match /attendance/{document} {
    	allow read: if request.auth!=null;
      allow write: if request.auth!=null && request.resource.data.teacher.id == request.auth.token.email;
    }
    
    match /classrooms/{document} {
    	allow read : if request.auth!=null;
      allow write : if request.auth!=null;
    }
    
    match /gclassrooms/{teacherId} {
    	allow read,write : if request.auth!=null && request.auth.token.email == teacherId;
    }
    
    match /teachers/{teacherId} {
    	allow read,write : if request.auth!=null && request.auth.token.email == teacherId;
    }
    
    // Following is for attendo-admin panel error
    
    match /semesters/{document}{ 
      allow read, write: if request.auth!=null;
  	}
    
    match /courses/{document}{ 
      allow read, write: if request.auth!=null;
  	}
    
    match /subjects/{document}{ 
      allow read, write: if request.auth!=null;
  	}
    
    match /reports/{document}{ 
      allow read, write: if request.auth!=null;
  	}
	}
}

